{% extends "user_base.html" %}
{% block title %}一覧ページ{% endblock %}
{% block active_done %}active{% endblock %}
{% block content %}
  <h1>今日完了したタスク : {{ today }}個　お疲れ様でした！</h1>
{% endblock %}
{% block content2 %}
  <!-- <table class='table border col-12'>
    <thead>
      <tr>
        <th scope='col'>今週のレポート</th>
        {% for info in infos %}
          <th scope='col'>{{ info.name }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope='col'>タスク完了数</th>
        {% for info in infos %}
          <th scope='col'><span class='text-danger'>{{info.num}}</span></th>
        {% endfor %}
      </tr>
    </tbody>
  </table> -->
  <canvas id="LineChart" height="70px"></canvas>
  <script type="text/javascript">

  /* idが"radar-chart"の要素を取得 */
  var ctx = document.getElementById("LineChart");

  var LineChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['今日', '昨日', '一昨日', '3日前', '4日前', '5日前', '6日前'],
        datasets: [{
          label: 'タスク完了数',
          data: {{data}},
          borderColor: "rgba(255,0,0,1)",
          backgroundColor: "rgba(0,0,0,0)",
          lineTension: 0
        }],
      },
      options: {
        title: {
        display: true,
        text: '今週のタスク完了状況',
        elements: {
            line: {
                tension: 0, // ベジェ曲線を無効にする
            }
        }
      },
      scales: {
        yAxes: [{
          ticks: {
            // suggestedMax: 100,
            // suggestedMin: 0,
            stepSize: 1,
            callback: function(value, index, values){
              return  value +  '個'
            }
          }
        }]
      },
      }
  });
  </script>
{% endblock %}

{% block content3 %}
  <h1>今週完了したタスク : {{ week.num }}個　<span class='text-info'>レベル : {{ week.level }}</span></h1>
{% endblock %}

{% block content4 %}
        <table class='table border col-12'>
          <thead>
            <tr>
              <th scope='col'></th>
              <th scope='col'>タスク名</th>
              <th scope='col'>重要</th>
              <th scope='col'>緊急</th>
              <th scope='col'>完了日</th>
              <th scope='col'>編集</th>
              <th scope='col'>元に戻す</th>
            </tr>
          </thead>
          <tbody>
            {% for done in week.tasks %}
              <tr>
                <th scope='row'>{{ forloop.counter }}</th>
                <td>{{ done.name }}</td>
                <td>{% if done.important == True %}○{% else %}✖️{% endif %}</td>
                <td>{% if done.urgent == True %}○{% else %}✖️{% endif %}</td>
                <td>{{ done.done_date.month }}/{{ done.done_date.day }}</td>
                <td>
                  <form method="POST" action="/done_edit_view">
                      {%csrf_token%}
                      <input name='id' type="hidden" value="{{ done.id }}"/>
                      <button type="submit" class='small'>edit</button>
                  </form>
                </td>
                <td>
                  <form method="POST" action="/recover">
                      {%csrf_token%}
                      <input name='id' type="hidden" value="{{ done.id }}"/>
                      <button type="submit" class='small'>return</button>
                  </form>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
{% endblock %}
